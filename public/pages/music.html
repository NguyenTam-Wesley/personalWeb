<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Music Playlist</title>
    <link href="https://fonts.googleapis.com/css2?family=Birthstone&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../style/components.css" />
    <link rel="stylesheet" href="../style/themes.css" />
    <link rel="stylesheet" href="../style/music.css" />
    <link
      rel="icon"
      href="https://calwzopyjitbtahiafzw.supabase.co/storage/v1/object/sign/web-pic/icon/avt_libai.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV84Mzg1MDYzNy1jNjQwLTQwYjQtYTk0OS1hODY4YmI0Yzk2YmMiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJ3ZWItcGljL2ljb24vYXZ0X2xpYmFpLmpwZyIsImlhdCI6MTc2NjAzNzcwMywiZXhwIjo4NjU2OTg4MTg1MDN9.1JSZExUNh3_1uiHZ00ayOskz7UX3S3DpVEtKPkKVwu8"
    />
  </head>
  <body>
    <main class="container music-section">
      <!-- Header -->
      <h1 class="page-title">๐ต Danh mแปฅc</h1>

      <!-- Top Bar: Back + Search -->
      <div class="top-bar">
        <button id="backBtn" aria-label="Quay lแบกi">โฌ๏ธ Quay lแบกi</button>
        <div class="search-container">
          <span class="search-icon">๐</span>
          <input 
            type="text" 
            id="searchInput" 
            class="search-input" 
            placeholder="Tรฌm kiแบฟm bรi hรกt, nghแป sฤฉ..."
            autocomplete="off"
            aria-label="Tรฌm kiแบฟm bรi hรกt"
          />
        </div>
        <div class="volume-control-bar">
          <canvas id="volumeCanvas" width="100" height="20" aria-label="ฤiแปu chแปnh รขm lฦฐแปฃng"></canvas>
          <button id="eraserBtn" aria-label="Xรณa bแบฃn vแบฝ">๐งน</button>
        </div>
      </div>

      <!-- Filter / Category -->
      <div class="filter-container" id="filterContainer">
        <!-- Filters will be dynamically added -->
      </div>

      <!-- Main Menu -->
      <div id="mainMenu"></div>
      
      <!-- Playlist Container -->
      <div id="playlistContainer"></div>

      <!-- Music List -->
      <div class="music-list" id="musicList">
        <!-- Music items will be dynamically added -->
      </div>

      <!-- Empty State -->
      <div class="empty-state" id="emptyState" style="display: none;">
        <div class="empty-state-icon">๐ต</div>
        <div class="empty-state-text">Chฦฐa cรณ bรi hรกt</div>
        <div class="empty-state-hint">Chแปn playlist ฤแป bแบฏt ฤแบงu nghe nhแบกc</div>
      </div>

      <!-- Loading State -->
      <div class="loading-state" id="loadingState" style="display: none;">
        <div>ฤang tแบฃi...</div>
      </div>
    </main>

    <!-- Queue Panel - Slide Out -->
    <div id="queuePanel" class="queue-panel">
      <div class="queue-panel-header">
        <h3>๐ Hรng ฤแปฃi phรกt</h3>
        <div class="queue-panel-actions">
          <button id="clearQueueBtn" class="queue-clear-btn" title="Xรณa tแบฅt cแบฃ">
            ๐๏ธ
          </button>
          <button id="closeQueueBtn" class="queue-close-btn" title="ฤรณng">
            โ
          </button>
        </div>
      </div>
      <div class="queue-list" id="queueList">
        <div class="queue-empty">
          <div class="queue-empty-icon">๐ญ</div>
          <div class="queue-empty-text">Hรng ฤแปฃi trแปng</div>
          <div class="queue-empty-hint">Thรชm bรi hรกt ฤแป tแบกo hรng ฤแปฃi</div>
        </div>
      </div>
    </div>

    <!-- Queue Toggle Button -->
    <button id="queueToggleBtn" class="queue-toggle-btn" title="Hรng ฤแปฃi phรกt">
      ๐ <span class="queue-count">0</span>
    </button>

    <!-- Player - Sticky Bottom -->
    <div id="controlsContainer" class="controls-container">
      <div class="player-controls">
        <div class="song-info">
          <span id="currentSongTitle">Chฦฐa chแปn bรi hรกt</span>
        </div>
        <div class="control-buttons">
          <button id="shuffleBtn" aria-label="Bแบญt/tแบฏt phรกt ngแบซu nhiรชn">๐</button>
          <button id="prevBtn" aria-label="Bรi trฦฐแปc">โฎ๏ธ</button>
          <button id="pauseResumeBtn" aria-label="Phรกt/Tแบกm dแปซng">โถ๏ธ</button>
          <button id="nextBtn" aria-label="Bรi tiแบฟp">โญ๏ธ</button>
          <button id="repeatBtn" aria-label="Bแบญt/tแบฏt lแบทp lแบกi">๐</button>
          <button id="addToPlaylistBtn" class="add-to-playlist-btn" aria-label="Thรชm bรi hรกt vรo playlist">โ</button>
        </div>
        <div class="progress-container">
          <span id="currentTime" aria-label="Thแปi gian hiแปn tแบกi">0:00</span>
          <input 
            type="range" 
            id="progressBar" 
            min="0" 
            value="0" 
            step="1" 
            aria-label="Thanh tiแบฟn trรฌnh phรกt nhแบกc"
          />
          <span id="duration" aria-label="Tแปng thแปi gian">0:00</span>
        </div>
      </div>
    </div>

    <audio id="musicPlayer" style="width:0;height:0;opacity:0;position:absolute;left:-9999px;" preload="metadata"></audio>

    <script type="module" src="../js/modules/music_entry.js"></script>
  </body>
</html>
