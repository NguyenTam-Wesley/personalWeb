<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - ntam</title>
    <link rel="stylesheet" href="../style/variables.css">
    <link rel="icon" href="https://calwzopyjitbtahiafzw.supabase.co/storage/v1/object/sign/web-pic/icon/avt_libai.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV84Mzg1MDYzNy1jNjQwLTQwYjQtYTk0OS1hODY4YmI0Yzk2YmMiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJ3ZWItcGljL2ljb24vYXZ0X2xpYmFpLmpwZyIsImlhdCI6MTc2NjAzNzcwMywiZXhwIjo4NjU2OTg4MTg1MDN9.1JSZExUNh3_1uiHZ00ayOskz7UX3S3DpVEtKPkKVwu8" type="image/jpeg">
    <link rel="stylesheet" href="../style/components.css">
    <link rel="stylesheet" href="../style/profile.css">
</head>
<body class="dark-theme">
    <div class="container">
        <!-- Main Content -->
        <main class="main-content">
            <!-- User Profile Section -->
            <section class="profile-section">
                <div class="profile-header">
                    <!-- Left side: Profile info -->
                    <div class="profile-left">
                        <div class="profile-avatar">
                            <img id="profile-avatar-img" src="/default-avatar.png" alt="Profile Avatar" class="avatar-image">
                        </div>
                        <div class="profile-info">
                            <h2 id="username-display" class="username">Loading...</h2>
                            <div class="level-info">
                                <span class="level-badge" id="level-badge">Lv. 1</span>
                                <div class="xp-bar">
                                    <div class="xp-fill" id="xp-fill" style="width: 0%"></div>
                                    <span class="xp-text" id="xp-text">0 / 100 XP</span>
                                </div>
                                <div class="currency-info">
                                    <div class="currency-item">
                                        <span class="currency-icon">ü™ô</span>
                                        <span class="currency-amount" id="coins-amount">0</span>
                                    </div>
                                    <div class="currency-item">
                                        <span class="currency-icon">üíé</span>
                                        <span class="currency-amount" id="gems-amount">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right side: Stats grid -->
                    <div class="profile-right">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">üéÆ</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="games-played">0</div>
                                    <div class="stat-label">Games Played</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">‚è±Ô∏è</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="total-time">0h</div>
                                    <div class="stat-label">Total Time</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üî•</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="current-streak">0</div>
                                    <div class="stat-label">Current Streak</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üèÜ</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="best-streak">0</div>
                                    <div class="stat-label">Best Streak</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tabs Section -->
            <section class="tabs-section">
                <div class="tabs-header">
                    <div class="tab-buttons">
                        <button class="tab-button active" data-tab="inventory">üéí Inventory</button>
                        <button class="tab-button" data-tab="achievements">üèÜ Achievements</button>
                        <button class="tab-button" data-tab="pets">üêæ Pets</button>
                        <button class="tab-button" data-tab="daily">üìÖ Daily</button>
                        <button class="tab-button" onclick="window.location.href='../pages/shop.html'">üõí Shop</button>
                    </div>
                </div>

                <div class="tabs-content">
                    <!-- Inventory Tab -->
                    <div class="tab-pane active" id="inventory-tab">
                        <div class="inventory-grid" id="inventory-grid">
                            <!-- Items will be loaded here -->
                        </div>
                        <div class="empty-state" id="empty-inventory">
                            <div class="empty-icon">üéí</div>
                            <div class="empty-text">Your inventory is empty</div>
                            <div class="empty-subtext">Complete games to earn items!</div>
                        </div>
                    </div>

                    <!-- Achievements Tab -->
                    <div class="tab-pane" id="achievements-tab">
                        <div class="achievements-summary">
                            <div class="achievement-stat">
                                <div class="stat-number" id="achievements-unlocked">0</div>
                                <div class="stat-label">Unlocked</div>
                            </div>
                            <div class="achievement-stat">
                                <div class="stat-number" id="achievements-total">0</div>
                                <div class="stat-label">Total</div>
                            </div>
                            <div class="achievement-stat">
                                <div class="stat-number" id="completion-rate">0%</div>
                                <div class="stat-label">Completion</div>
                            </div>
                        </div>
                        <div class="achievements-grid" id="achievements-grid">
                            <!-- Achievements will be loaded here -->
                        </div>
                    </div>

                    <!-- Pets Tab -->
                    <div class="tab-pane" id="pets-tab">
                        <!-- Pet Settings -->
                        <div class="pet-settings-section">
                            <h3>üêæ Pet Settings</h3>
                            <div class="settings-grid">
                                <div class="setting-item">
                                    <label class="setting-label">
                                        <input type="checkbox" id="pet-enabled" onchange="togglePetEnabled()">
                                        <span>Enable Pet</span>
                                    </label>
                                </div>

                                <div class="setting-item">
                                    <label class="setting-label">Pet Size:</label>
                                    <select id="pet-size" onchange="updatePetSize()">
                                        <option value="small">Small</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="large">Large</option>
                                    </select>
                                </div>

                                <div class="setting-item">
                                    <label class="setting-label">Pet Theme:</label>
                                    <select id="pet-theme" onchange="updatePetTheme()">
                                        <option value="default" selected>Default</option>
                                        <option value="dark">Dark</option>
                                        <option value="light">Light</option>
                                    </select>
                                </div>

                                <div class="setting-item">
                                    <div class="action-buttons">
                                        <button onclick="resetPetPosition()" class="reset-btn">üìç Reset Position</button>
                                        <button onclick="testPet()" class="test-btn">üéÆ Test Pet</button>
                                    </div>
                                </div>
                            </div>

                            <div class="pet-info-note">
                                <small>üí° <strong>Note:</strong> Control panels are page-specific and can be enabled per page for gaming or testing.</small>
                            </div>

                            <div class="pet-info">
                                <div class="info-item">
                                    <strong>Current Status:</strong>
                                    <span id="pet-status">Checking...</span>
                                </div>
                                <div class="info-item">
                                    <strong>Current Page:</strong>
                                    <span id="current-page">Loading...</span>
                                </div>
                            </div>
                        </div>

                        <!-- Future: Multiple Pets Collection -->
                        <div class="pets-collection-section" style="margin-top: 30px;">
                            <h3>ü¶¥ Pet Collection</h3>
                            <div class="pets-grid" id="pets-grid">
                                <!-- Future pets will be loaded here -->
                            </div>
                            <div class="empty-state" id="empty-pets">
                                <div class="empty-icon">üêæ</div>
                                <div class="empty-text">More pets coming soon!</div>
                                <div class="empty-subtext">Stay tuned for new pet types and customization options!</div>
                            </div>
                        </div>
                    </div>

                    <!-- Daily Tab -->
                    <div class="tab-pane" id="daily-tab">
                        <div class="daily-rewards">
                            <div class="daily-header">
                                <h3>Daily Rewards</h3>
                                <div class="streak-info">
                                    <span class="streak-icon">üî•</span>
                                    <span class="streak-count" id="daily-streak">0</span>
                                </div>
                            </div>
                            <div class="daily-grid" id="daily-rewards-grid">
                                <!-- Daily rewards will be loaded here -->
                            </div>
                            <button class="claim-daily-btn" id="claim-daily-btn">Claim Today's Reward</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <div class="modal" id="item-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="item-modal-title">Item Details</h3>
                <button class="modal-close" id="item-modal-close">&times;</button>
            </div>
            <div class="modal-body" id="item-modal-body">
                <!-- Item details will be loaded here -->
            </div>
        </div>
    </div>

    <div class="modal" id="achievement-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="achievement-modal-title">Achievement Details</h3>
                <button class="modal-close" id="achievement-modal-close">&times;</button>
            </div>
            <div class="modal-body" id="achievement-modal-body">
                <!-- Achievement details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="../js/modules/profile_entry.js"></script>
</body>
</html>