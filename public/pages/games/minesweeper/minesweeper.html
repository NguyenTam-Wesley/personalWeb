<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minesweeper Game</title>
    <link rel="stylesheet" href="../../../style/components.css" />
    <link rel="stylesheet" href="../../../style/style.css" />
    <link rel="stylesheet" href="../../../style/minesweeper.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" href="https://calwzopyjitbtahiafzw.supabase.co/storage/v1/object/sign/web-pic/icon/avt_libai.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV84Mzg1MDYzNy1jNjQwLTQwYjQtYTk0OS1hODY4YmI0Yzk2YmMiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJ3ZWItcGljL2ljb24vYXZ0X2xpYmFpLmpwZyIsImlhdCI6MTc2NjAzNzcwMywiZXhwIjo4NjU2OTg4MTg1MDN9.1JSZExUNh3_1uiHZ00ayOskz7UX3S3DpVEtKPkKVwu8" />
</head>
<body>
    <div class="minesweeper-container">
        <div class="minesweeper-header">
            <h1>Minesweeper</h1>
            <div class="game-info">
                <div id="timer" class="timer">‚è± 00:00</div>
                <div class="mine-counter">
                    <span id="mine-count">10</span> üí£
                </div>
                <div class="difficulty-selector">
                    <label for="difficulty">ƒê·ªô kh√≥:</label>
                    <select id="difficulty" class="difficulty-select">
                        <option value="easy">D·ªÖ (9x9, 10 m√¨n)</option>
                        <option value="medium" selected>Trung b√¨nh (16x16, 40 m√¨n)</option>
                        <option value="hard">Kh√≥ (16x30, 99 m√¨n)</option>
                        <option value="very_hard">R·∫•t kh√≥ (30x30, 200 m√¨n)</option>
                        <option value="expert">Chuy√™n gia (50x50, 500 m√¨n)</option>
                    </select>
                    <div id="best-time-display" class="best-time-display">Best: --:--</div>
                    <div id="rank-display" class="rank-display">Rank: --</div>
                </div>
            </div>
            <p class="device-instruction">T√¨m t·∫•t c·∫£ c√°c qu·∫£ m√¨n</p>
        </div>

        <div class="game-controls">
            <button id="newGameBtn" class="btn-primary">V√°n m·ªõi</button>
            <div class="mobile-flag-toggle" id="mobileFlagToggle" style="display: none;">
                <button id="flagModeBtn" class="btn-secondary flag-mode-btn active">
                    <span class="mode-icon">üëÜ</span>
                    <span class="mode-text">M·ªü √¥</span>
                </button>
            </div>
            <div class="achievements-container">
                <button id="achievementsBtn" class="btn-secondary achievements-btn">üèÜ Th√†nh t√≠ch</button>
                <div id="achievementsDropdown" class="achievements-dropdown" style="display: none;">
                    <div class="achievements-content">
                        <h4>Th√†nh t√≠ch c·ªßa b·∫°n</h4>
                        <div id="achievements-list" class="achievements-list">
                            <!-- Achievements will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="leaderboard-container">
                <button id="leaderboardBtn" class="btn-secondary leaderboard-btn">üèÖ Leaderboard</button>
                <div id="leaderboardDropdown" class="leaderboard-dropdown" style="display: none;">
                    <div class="leaderboard-content">
                        <h4>Top Players</h4>
                        <div id="leaderboard-list" class="leaderboard-list">
                            <!-- Leaderboard will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="game-status">
                <span id="game-status">S·∫µn s√†ng</span>
            </div>
        </div>

        <div id="game-board" class="game-board">
            <!-- Game board will be rendered here -->
        </div>

        <div class="game-instructions">
            <!-- Desktop Instructions -->
            <div class="instruction-item desktop-only">
                <span class="instruction-icon">üñ±Ô∏è</span>
                <span>Click tr√°i: M·ªü √¥</span>
            </div>
            <div class="instruction-item desktop-only">
                <span class="instruction-icon">üëâ</span>
                <span>Click ph·∫£i: C·∫Øm c·ªù</span>
            </div>

            <!-- Tablet Instructions -->
            <div class="instruction-item tablet-only">
                <span class="instruction-icon">üëÜ</span>
                <span>Touch: M·ªü √¥ ho·∫∑c c·∫Øm c·ªù (theo ch·∫ø ƒë·ªô)</span>
            </div>
            <div class="instruction-item tablet-only">
                <span class="instruction-icon">üîÑ</span>
                <span>Ch·∫ø ƒë·ªô: Nh·∫•n n√∫t ƒë·ªÉ chuy·ªÉn ƒë·ªïi</span>
            </div>

            <!-- Mobile Instructions -->
            <div class="instruction-item mobile-only">
                <span class="instruction-icon">üëÜ</span>
                <span>Touch: M·ªü √¥ ho·∫∑c c·∫Øm c·ªù (theo ch·∫ø ƒë·ªô)</span>
            </div>
            <div class="instruction-item mobile-only">
                <span class="instruction-icon">üîÑ</span>
                <span>Ch·∫ø ƒë·ªô: Nh·∫•n n√∫t ƒë·ªÉ chuy·ªÉn ƒë·ªïi</span>
            </div>

            <!-- Common Instructions -->
            <div class="instruction-item">
                <span class="instruction-icon">üî¢</span>
                <span>S·ªë hi·ªÉn th·ªã: S·ªë m√¨n xung quanh</span>
            </div>
            <div class="instruction-item">
                <span class="instruction-icon">üö©</span>
                <span>C·ªù: ƒê√°nh d·∫•u v·ªã tr√≠ nghi ng·ªù c√≥ m√¨n</span>
            </div>
        </div>
    </div>

    <!-- Debug script for testing device detection -->
    <script>
        // Add to global scope for testing
        window.testDeviceDetection = function() {
            if (window.minesweeperGame) {
                const result = window.minesweeperGame.forceRefreshDeviceDetection();
                alert(`Current device: ${result.toUpperCase()}\nCheck console for details.`);
            } else {
                alert('Game not loaded yet - try again in a moment');
            }
        };
    </script>
    <script type="module" src="../../../js/modules/minesweeper_entry.js"></script>
</body>
</html>